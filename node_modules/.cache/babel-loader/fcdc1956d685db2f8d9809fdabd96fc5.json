{"remainingRequest":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/babel-loader/lib/index.js!/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/eslint-loader/index.js??ref--13-0!/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/src/widgets/table2/table.js","dependencies":[{"path":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/src/widgets/table2/table.js","mtime":1591176025227},{"path":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\nimport axios from \"axios\";\nimport func from '@/libs/func';\nimport router from \"@/config/router\";\nexport default {\n  data: function data() {\n    return {\n      error: null,\n      loading: false,\n      data: [],\n      sort: {\n        key: \"\",\n        order: \"\"\n      },\n      pager: {\n        page: 0,\n        count: 0,\n        limit: 100\n      },\n      pages: {\n        current: 0,\n        page: []\n      },\n      filters: {}\n    };\n  },\n  created: function created() {\n    this.updateRoute();\n  },\n  watch: {\n    '$route': 'updateRoute'\n  },\n  methods: {\n    sortBy: function sortBy(el) {\n      if (this.sort.key == el) {\n        if (this.sort.order == 'ASC') {\n          this.sort.order = 'DESC';\n        } else {\n          this.sort.order = 'ASC';\n        }\n      } else {\n        this.sort.key = el;\n        this.sort.order = 'ASC';\n      }\n\n      this.push();\n    },\n    push: function push() {\n      var params = {\n        sort: this.sort,\n        filters: this.filters,\n        pager: this.pager\n      };\n      router.push({\n        query: {\n          q: func.url_encode(params)\n        }\n      });\n    },\n    onChangeFilter: function onChangeFilter() {\n      this.push();\n    },\n    maxPage: function maxPage() {\n      return Math.ceil(this.pager.count / this.pager.limit);\n    },\n    updateRoute: function updateRoute() {\n      var params = {};\n\n      if (this.$route.query.q) {\n        params = func.url_decode(this.$route.query.q);\n\n        if (params.sort) {\n          this.sort = params.sort;\n        }\n\n        if (params.filters) {\n          this.filters = params.filters;\n        }\n\n        if (params.pager) {\n          this.pager = params.pager;\n        }\n      }\n\n      this.fetchData();\n    },\n    fetchData: function fetchData() {\n      var _this = this;\n\n      this.error = null;\n      this.loading = true;\n      axios.get(this.api, {\n        params: {\n          sort: this.sort,\n          filters: this.filters,\n          pager: this.pager\n        }\n      }).then(function (response) {\n        _this.loading = false;\n\n        if (response.data.data == null) {\n          _this.data = [];\n        } else {\n          _this.data = response.data.data;\n          _this.pager = response.data.pager;\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n};",{"version":3,"sources":["/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/src/widgets/table2/table.js"],"names":["axios","func","router","data","error","loading","sort","key","order","pager","page","count","limit","pages","current","filters","created","updateRoute","watch","methods","sortBy","el","push","params","query","q","url_encode","onChangeFilter","maxPage","Math","ceil","$route","url_decode","fetchData","get","api","then","response","catch","console","log"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport func from '@/libs/func'\nimport router from \"@/config/router\";\n\nexport default {\n    data: function() {\n        return {\n            error: null,\n            loading: false,\n            data: [],\n            sort: {\n                key: \"\",\n                order: \"\"\n            },\n            pager: {\n                page: 0,\n                count: 0,\n                limit: 100\n            },\n            pages: {\n                current: 0,\n                page: []\n            },\n            filters: {}\n        };\n    },\n    created() {\n        this.updateRoute()\n    },\n    watch: {\n        '$route': 'updateRoute',\n    },\n    methods: {\n        sortBy: function(el) {\n            if (this.sort.key == el) {\n                if (this.sort.order == 'ASC') {\n                    this.sort.order = 'DESC'\n                } else {\n                    this.sort.order = 'ASC'\n                }\n            } else {\n                this.sort.key = el\n                this.sort.order = 'ASC'\n            }\n            this.push()\n        },\n        push: function() {\n            var params = {\n                sort: this.sort,\n                filters: this.filters,\n                pager: this.pager\n            }\n            router.push({ query: { q: func.url_encode(params) } })\n        },\n        onChangeFilter: function() {\n            this.push()\n        },\n        maxPage: function() {\n            return Math.ceil(this.pager.count / this.pager.limit)\n        },\n        updateRoute: function() {\n            var params = {}\n            if (this.$route.query.q) {\n                params = func.url_decode(this.$route.query.q)\n                if (params.sort) {\n                    this.sort = params.sort\n                }\n                if (params.filters) {\n                    this.filters = params.filters\n                }\n                if (params.pager) {\n                    this.pager = params.pager\n                }\n            }\n            this.fetchData()\n        },\n        fetchData() {\n            this.error = null\n            this.loading = true\n            axios\n                .get(this.api, { params: { sort: this.sort, filters: this.filters, pager: this.pager } })\n                .then(response => {\n                    this.loading = false\n                    if (response.data.data == null) {\n                        this.data = []\n                    } else {\n                        this.data = response.data.data\n                        this.pager = response.data.pager\n                    }\n                })\n                .catch(error => { console.log(error) })\n        }\n    }\n};"]}]}