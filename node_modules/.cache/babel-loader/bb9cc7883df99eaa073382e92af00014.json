{"remainingRequest":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/babel-loader/lib/index.js!/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/eslint-loader/index.js??ref--13-0!/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/src/widgets/select/mixinBaseSelect.js","dependencies":[{"path":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/src/widgets/select/mixinBaseSelect.js","mtime":1572346280080},{"path":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nexport default {\n  props: {\n    value: String\n  },\n  data: function data() {\n    return {\n      showOptions: false,\n      id: null,\n      opt: this.options,\n      resText: this.getText(this.value),\n      resValue: this.value,\n      resValueBefore: this.value,\n      resPlaceholder: this.getText(this.value),\n      typeAheadPointer: -1,\n      positionClass: ''\n    };\n  },\n  mounted: function mounted() {\n    this.id = this._uid;\n  },\n  watch: {\n    value: function value() {\n      this.resText = this.getText(this.value);\n      this.resPlaceholder = this.getText(this.value);\n    },\n    typeAheadPointer: function typeAheadPointer() {\n      this.maybeAdjustScroll();\n    }\n  },\n  methods: {\n    maybeAdjustScroll: function maybeAdjustScroll() {\n      var pixelsToPointerTop = this.pixelsToPointerTop();\n      var pixelsToPointerBottom = this.pixelsToPointerBottom();\n\n      if (pixelsToPointerTop <= this.viewport().top) {\n        return this.scrollTo(pixelsToPointerTop);\n      } else if (pixelsToPointerBottom >= this.viewport().bottom) {\n        return this.scrollTo(this.viewport().top + this.pointerHeight());\n      }\n    },\n    pixelsToPointerTop: function pixelsToPointerTop() {\n      var pixelsToPointerTop = 0;\n\n      if (this.$refs.dropdownMenu) {\n        for (var i = 0; i < this.typeAheadPointer; i++) {\n          pixelsToPointerTop += this.$refs.dropdownMenu.children[i].offsetHeight;\n        }\n      }\n\n      return pixelsToPointerTop;\n    },\n    pixelsToPointerBottom: function pixelsToPointerBottom() {\n      return this.pixelsToPointerTop() + this.pointerHeight();\n    },\n    pointerHeight: function pointerHeight() {\n      var element = this.$refs.dropdownMenu ? this.$refs.dropdownMenu.children[this.typeAheadPointer] : false;\n      return element ? element.offsetHeight : 0;\n    },\n    viewport: function viewport() {\n      return {\n        top: this.$refs.dropdownMenu ? this.$refs.dropdownMenu.scrollTop : 0,\n        bottom: this.$refs.dropdownMenu ? this.$refs.dropdownMenu.offsetHeight + this.$refs.dropdownMenu.scrollTop : 0\n      };\n    },\n    scrollTo: function scrollTo(position) {\n      return this.$refs.dropdownMenu ? this.$refs.dropdownMenu.scrollTop = position : null;\n    },\n    closeEvent: function closeEvent(event) {\n      this.showOptions = false;\n      this.resText = this.resPlaceholder;\n      this.endOfEdit();\n    },\n    getI: function getI(text) {\n      if (this.opt) {\n        for (var i = 0; i < this.opt.length; i++) {\n          if (this.opt[i].text == text) {\n            return i;\n          }\n        }\n      }\n\n      return 0;\n    },\n    getValue: function getValue(text) {\n      for (var i = 0; i < this.opt.length; i++) {\n        if (this.opt[i].text == text) {\n          return this.opt[i].value;\n        }\n      }\n    },\n    getText: function getText(value) {\n      if (value == null) return \"\";\n\n      for (var i = 0; i < this.opt.length; i++) {\n        if (this.opt[i].value == value) {\n          return this.opt[i].text;\n        }\n      }\n    },\n    endOfEdit: function endOfEdit() {\n      this.resValue = this.getValue(this.resText);\n      this.resPlaceholder = this.resText;\n      this.$emit(\"input\", this.resValue);\n      this.$emit(\"change-model\", this.resValue);\n      this.showOptions = false;\n    },\n    onInput: function onInput(value) {\n      if (!this.showOptions) {\n        this.showOptions = true;\n      }\n\n      var val = this.resValueBefore;\n\n      for (var i = 0; i < this.opt.length; i++) {\n        var res = this.opt[i].text.toUpperCase().indexOf(value.toUpperCase());\n\n        if (res == 0) {\n          value = this.opt[i].text.substr(0, value.length);\n          this.resValueBefore = value;\n          val = value;\n          this.resPlaceholder = this.opt[i].text;\n          break;\n        }\n      }\n\n      if (val == \"\") {\n        this.resPlaceholder = this.placeholder;\n      }\n\n      this.$refs[\"input\"].value = val;\n      this.resText = val;\n      this.typeAheadPointer = this.getI(this.resPlaceholder);\n      this.scrollTo(this.pixelsToPointerTop(this.typeAheadPointer));\n    },\n    open: function open() {\n      var _this = this;\n\n      if (!this.showOptions) {\n        this.showOptions = true;\n        this.$nextTick(function () {\n          _this.typeAheadPointer = _this.getI(_this.resPlaceholder);\n\n          _this.scrollTo(_this.pixelsToPointerTop(_this.typeAheadPointer));\n        });\n        this.addCloseEvents();\n        this.setupPosition();\n      }\n    },\n    close: function close() {\n      if (this.showOptions) {\n        this.showOptions = false;\n        this.removeCloseEvents();\n        this.teardownPosition();\n      }\n    },\n    closeViaOverlay: function closeViaOverlay(e) {\n      if (e.target === this.$refs.outerWrap) {\n        this.close();\n      }\n    },\n    addCloseEvents: function addCloseEvents() {\n      var _this2 = this;\n\n      if (!this.closeEventListener) {\n        this.closeEventListener = function (e) {\n          return _this2.inspectCloseEvent(e);\n        };\n\n        [\"click\", \"keyup\", \"focusin\"].forEach(function (eventName) {\n          return document.addEventListener(eventName, _this2.closeEventListener);\n        });\n      }\n    },\n    inspectCloseEvent: function inspectCloseEvent(event) {\n      if (event.keyCode) {\n        event.keyCode === 27 && this.close();\n      } else if (!(event.target === this.$el) && !this.$el.contains(event.target)) {\n        this.close();\n      }\n    },\n    removeCloseEvents: function removeCloseEvents() {\n      var _this3 = this;\n\n      if (this.closeEventListener) {\n        [\"click\", \"keyup\"].forEach(function (eventName) {\n          return document.removeEventListener(eventName, _this3.closeEventListener);\n        });\n        delete this.closeEventListener;\n      }\n    },\n    setupPosition: function setupPosition() {\n      var _this4 = this;\n\n      if (!this.positionEventListener) {\n        this.positionEventListener = function () {\n          return _this4.positionFloater();\n        };\n\n        window.addEventListener(\"resize\", this.positionEventListener);\n      }\n\n      this.positionFloater();\n    },\n    positionFloater: function positionFloater() {\n      var _this5 = this;\n\n      var inputRect = this.$el.getBoundingClientRect();\n      var verticalClass = \"bs-position-top\";\n\n      var calculate = function calculate() {\n        var rect = _this5.$refs.dropdownMenu.getBoundingClientRect();\n\n        var floaterHeight = rect.height;\n\n        if (inputRect.top + inputRect.height + floaterHeight > window.innerHeight && inputRect.top - floaterHeight > 0) {\n          verticalClass = \"bs-position-bottom\";\n        }\n\n        _this5.positionClass = [verticalClass].join(\" \");\n      };\n\n      this.$refs.dropdownMenu ? calculate() : this.$nextTick(calculate);\n    },\n    teardownPosition: function teardownPosition() {\n      if (this.positionEventListener) {\n        this.positionClass = undefined;\n        window.removeEventListener(\"resize\", this.positionEventListener);\n        delete this.positionEventListener;\n      }\n    },\n    onFocusSelect: function onFocusSelect() {\n      var _this6 = this;\n\n      this.showOptions = true;\n      this.$nextTick(function () {\n        _this6.typeAheadPointer = _this6.getI(_this6.resPlaceholder);\n\n        _this6.scrollTo(_this6.pixelsToPointerTop(_this6.typeAheadPointer));\n      });\n    },\n    onClickOption: function onClickOption(option, key) {\n      if (!option.disabled) {\n        this.resText = option.text;\n        this.endOfEdit();\n      }\n    },\n    onKeyDown: function onKeyDown(event) {\n      switch (event.keyCode) {\n        case 9:\n          // tab\n          this.resText = this.resText == \"\" ? \"\" : this.resPlaceholder;\n          this.endOfEdit();\n          return;\n      }\n    },\n    onKeyUp: function onKeyUp(event) {\n      switch (event.keyCode) {\n        case 38:\n          // up\n          event.preventDefault();\n          var i = this.getI(this.resPlaceholder);\n\n          if (this.showOptions) {\n            if (i > 0) {\n              i--;\n            }\n          } else {\n            this.showOptions = true;\n          }\n\n          this.resPlaceholder = this.opt[i].text;\n          this.resText = this.resPlaceholder;\n          this.typeAheadPointer = i;\n\n          if (this.maybeAdjustScroll) {\n            this.maybeAdjustScroll();\n          }\n\n          return;\n\n        case 40:\n          // down\n          event.preventDefault();\n          var i = this.getI(this.resPlaceholder);\n\n          if (this.showOptions) {\n            if (i < this.opt.length - 1) {\n              i++;\n            }\n          } else {\n            this.showOptions = true;\n          }\n\n          if (this.resPlaceholder == \"\") {\n            i = 0;\n          }\n\n          this.resPlaceholder = this.opt[i].text;\n          this.resText = this.resPlaceholder;\n          this.typeAheadPointer = i;\n\n          if (this.maybeAdjustScroll) {\n            this.maybeAdjustScroll();\n          }\n\n          return;\n\n        case 13:\n          //enter\n          //event.preventDefault();\n          this.resText = this.resText == \"\" ? \"\" : this.resPlaceholder;\n          this.endOfEdit();\n          break;\n      }\n    }\n  }\n};",{"version":3,"sources":["/home/andrey/dev/www/evoltrend.com/evoltrend.com_front/src/widgets/select/mixinBaseSelect.js"],"names":["props","value","String","data","showOptions","id","opt","options","resText","getText","resValue","resValueBefore","resPlaceholder","typeAheadPointer","positionClass","mounted","_uid","watch","maybeAdjustScroll","methods","pixelsToPointerTop","pixelsToPointerBottom","viewport","top","scrollTo","bottom","pointerHeight","$refs","dropdownMenu","i","children","offsetHeight","element","scrollTop","position","closeEvent","event","endOfEdit","getI","text","length","getValue","$emit","onInput","val","res","toUpperCase","indexOf","substr","placeholder","open","$nextTick","addCloseEvents","setupPosition","close","removeCloseEvents","teardownPosition","closeViaOverlay","e","target","outerWrap","closeEventListener","inspectCloseEvent","forEach","eventName","document","addEventListener","keyCode","$el","contains","removeEventListener","positionEventListener","positionFloater","window","inputRect","getBoundingClientRect","verticalClass","calculate","rect","floaterHeight","height","innerHeight","join","undefined","onFocusSelect","onClickOption","option","key","disabled","onKeyDown","onKeyUp","preventDefault"],"mappings":";AAAA,eAAe;AACXA,EAAAA,KAAK,EAAE;AACHC,IAAAA,KAAK,EAAEC;AADJ,GADI;AAIXC,EAAAA,IAAI,EAAE,gBAAY;AACd,WAAO;AACHC,MAAAA,WAAW,EAAE,KADV;AAEHC,MAAAA,EAAE,EAAE,IAFD;AAGHC,MAAAA,GAAG,EAAE,KAAKC,OAHP;AAIHC,MAAAA,OAAO,EAAE,KAAKC,OAAL,CAAa,KAAKR,KAAlB,CAJN;AAKHS,MAAAA,QAAQ,EAAE,KAAKT,KALZ;AAMHU,MAAAA,cAAc,EAAE,KAAKV,KANlB;AAOHW,MAAAA,cAAc,EAAE,KAAKH,OAAL,CAAa,KAAKR,KAAlB,CAPb;AAQHY,MAAAA,gBAAgB,EAAE,CAAC,CARhB;AASHC,MAAAA,aAAa,EAAE;AATZ,KAAP;AAWH,GAhBU;AAiBXC,EAAAA,OAjBW,qBAiBD;AACN,SAAKV,EAAL,GAAU,KAAKW,IAAf;AACH,GAnBU;AAoBXC,EAAAA,KAAK,EAAE;AACHhB,IAAAA,KAAK,EAAE,iBAAY;AACf,WAAKO,OAAL,GAAe,KAAKC,OAAL,CAAa,KAAKR,KAAlB,CAAf;AACA,WAAKW,cAAL,GAAsB,KAAKH,OAAL,CAAa,KAAKR,KAAlB,CAAtB;AACH,KAJE;AAKHY,IAAAA,gBALG,8BAKgB;AACf,WAAKK,iBAAL;AACH;AAPE,GApBI;AA6BXC,EAAAA,OAAO,EAAE;AACLD,IAAAA,iBADK,+BACe;AAChB,UAAIE,kBAAkB,GAAG,KAAKA,kBAAL,EAAzB;AACA,UAAIC,qBAAqB,GAAG,KAAKA,qBAAL,EAA5B;;AAEA,UAAID,kBAAkB,IAAI,KAAKE,QAAL,GAAgBC,GAA1C,EAA+C;AAC3C,eAAO,KAAKC,QAAL,CAAcJ,kBAAd,CAAP;AACH,OAFD,MAEO,IAAIC,qBAAqB,IAAI,KAAKC,QAAL,GAAgBG,MAA7C,EAAqD;AACxD,eAAO,KAAKD,QAAL,CAAc,KAAKF,QAAL,GAAgBC,GAAhB,GAAsB,KAAKG,aAAL,EAApC,CAAP;AACH;AACJ,KAVI;AAWLN,IAAAA,kBAXK,gCAWgB;AACjB,UAAIA,kBAAkB,GAAG,CAAzB;;AACA,UAAI,KAAKO,KAAL,CAAWC,YAAf,EAA6B;AACzB,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhB,gBAAzB,EAA2CgB,CAAC,EAA5C,EAAgD;AAC5CT,UAAAA,kBAAkB,IAAI,KAAKO,KAAL,CAAWC,YAAX,CAAwBE,QAAxB,CAAiCD,CAAjC,EACjBE,YADL;AAEH;AACJ;;AACD,aAAOX,kBAAP;AACH,KApBI;AAqBLC,IAAAA,qBArBK,mCAqBmB;AACpB,aAAO,KAAKD,kBAAL,KAA4B,KAAKM,aAAL,EAAnC;AACH,KAvBI;AAwBLA,IAAAA,aAxBK,2BAwBW;AACZ,UAAIM,OAAO,GAAG,KAAKL,KAAL,CAAWC,YAAX,GACR,KAAKD,KAAL,CAAWC,YAAX,CAAwBE,QAAxB,CAAiC,KAAKjB,gBAAtC,CADQ,GAER,KAFN;AAGA,aAAOmB,OAAO,GAAGA,OAAO,CAACD,YAAX,GAA0B,CAAxC;AACH,KA7BI;AA8BLT,IAAAA,QA9BK,sBA8BM;AACP,aAAO;AACHC,QAAAA,GAAG,EAAE,KAAKI,KAAL,CAAWC,YAAX,GAA0B,KAAKD,KAAL,CAAWC,YAAX,CAAwBK,SAAlD,GAA8D,CADhE;AAEHR,QAAAA,MAAM,EAAE,KAAKE,KAAL,CAAWC,YAAX,GACF,KAAKD,KAAL,CAAWC,YAAX,CAAwBG,YAAxB,GACF,KAAKJ,KAAL,CAAWC,YAAX,CAAwBK,SAFpB,GAGF;AALH,OAAP;AAOH,KAtCI;AAuCLT,IAAAA,QAvCK,oBAuCIU,QAvCJ,EAuCc;AACf,aAAO,KAAKP,KAAL,CAAWC,YAAX,GACA,KAAKD,KAAL,CAAWC,YAAX,CAAwBK,SAAxB,GAAoCC,QADpC,GAED,IAFN;AAGH,KA3CI;AA6CLC,IAAAA,UA7CK,sBA6CMC,KA7CN,EA6Ca;AACd,WAAKhC,WAAL,GAAmB,KAAnB;AACA,WAAKI,OAAL,GAAe,KAAKI,cAApB;AACA,WAAKyB,SAAL;AACH,KAjDI;AAkDLC,IAAAA,IAAI,EAAE,cAAUC,IAAV,EAAgB;AAClB,UAAI,KAAKjC,GAAT,EAAc;AACV,aAAK,IAAIuB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,GAAL,CAASkC,MAA7B,EAAqCX,CAAC,EAAtC,EAA0C;AACtC,cAAI,KAAKvB,GAAL,CAASuB,CAAT,EAAYU,IAAZ,IAAoBA,IAAxB,EAA8B;AAC1B,mBAAOV,CAAP;AACH;AACJ;AACJ;;AACD,aAAO,CAAP;AACH,KA3DI;AA4DLY,IAAAA,QAAQ,EAAE,kBAAUF,IAAV,EAAgB;AACtB,WAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,GAAL,CAASkC,MAA7B,EAAqCX,CAAC,EAAtC,EAA0C;AACtC,YAAI,KAAKvB,GAAL,CAASuB,CAAT,EAAYU,IAAZ,IAAoBA,IAAxB,EAA8B;AAC1B,iBAAO,KAAKjC,GAAL,CAASuB,CAAT,EAAY5B,KAAnB;AACH;AACJ;AACJ,KAlEI;AAmELQ,IAAAA,OAAO,EAAE,iBAAUR,KAAV,EAAiB;AACtB,UAAIA,KAAK,IAAI,IAAb,EAAmB,OAAO,EAAP;;AACnB,WAAK,IAAI4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,GAAL,CAASkC,MAA7B,EAAqCX,CAAC,EAAtC,EAA0C;AACtC,YAAI,KAAKvB,GAAL,CAASuB,CAAT,EAAY5B,KAAZ,IAAqBA,KAAzB,EAAgC;AAC5B,iBAAO,KAAKK,GAAL,CAASuB,CAAT,EAAYU,IAAnB;AACH;AACJ;AACJ,KA1EI;AA2ELF,IAAAA,SAAS,EAAE,qBAAY;AACnB,WAAK3B,QAAL,GAAgB,KAAK+B,QAAL,CAAc,KAAKjC,OAAnB,CAAhB;AACA,WAAKI,cAAL,GAAsB,KAAKJ,OAA3B;AACA,WAAKkC,KAAL,CAAW,OAAX,EAAoB,KAAKhC,QAAzB;AACA,WAAKgC,KAAL,CAAW,cAAX,EAA2B,KAAKhC,QAAhC;AACA,WAAKN,WAAL,GAAmB,KAAnB;AACH,KAjFI;AAkFLuC,IAAAA,OAAO,EAAE,iBAAU1C,KAAV,EAAiB;AACtB,UAAI,CAAC,KAAKG,WAAV,EAAuB;AACnB,aAAKA,WAAL,GAAmB,IAAnB;AACH;;AACD,UAAIwC,GAAG,GAAG,KAAKjC,cAAf;;AACA,WAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,GAAL,CAASkC,MAA7B,EAAqCX,CAAC,EAAtC,EAA0C;AACtC,YAAIgB,GAAG,GAAG,KAAKvC,GAAL,CAASuB,CAAT,EAAYU,IAAZ,CACLO,WADK,GAELC,OAFK,CAEG9C,KAAK,CAAC6C,WAAN,EAFH,CAAV;;AAGA,YAAID,GAAG,IAAI,CAAX,EAAc;AACV5C,UAAAA,KAAK,GAAG,KAAKK,GAAL,CAASuB,CAAT,EAAYU,IAAZ,CAAiBS,MAAjB,CAAwB,CAAxB,EAA2B/C,KAAK,CAACuC,MAAjC,CAAR;AACA,eAAK7B,cAAL,GAAsBV,KAAtB;AACA2C,UAAAA,GAAG,GAAG3C,KAAN;AACA,eAAKW,cAAL,GAAsB,KAAKN,GAAL,CAASuB,CAAT,EAAYU,IAAlC;AACA;AACH;AACJ;;AACD,UAAIK,GAAG,IAAI,EAAX,EAAe;AACX,aAAKhC,cAAL,GAAsB,KAAKqC,WAA3B;AACH;;AACD,WAAKtB,KAAL,CAAW,OAAX,EAAoB1B,KAApB,GAA4B2C,GAA5B;AACA,WAAKpC,OAAL,GAAeoC,GAAf;AACA,WAAK/B,gBAAL,GAAwB,KAAKyB,IAAL,CAAU,KAAK1B,cAAf,CAAxB;AACA,WAAKY,QAAL,CAAc,KAAKJ,kBAAL,CAAwB,KAAKP,gBAA7B,CAAd;AACH,KA1GI;AA4GLqC,IAAAA,IA5GK,kBA4GE;AAAA;;AACH,UAAI,CAAC,KAAK9C,WAAV,EAAuB;AACnB,aAAKA,WAAL,GAAmB,IAAnB;AACA,aAAK+C,SAAL,CAAe,YAAM;AACjB,UAAA,KAAI,CAACtC,gBAAL,GAAwB,KAAI,CAACyB,IAAL,CAAU,KAAI,CAAC1B,cAAf,CAAxB;;AACA,UAAA,KAAI,CAACY,QAAL,CAAc,KAAI,CAACJ,kBAAL,CAAwB,KAAI,CAACP,gBAA7B,CAAd;AACH,SAHD;AAIA,aAAKuC,cAAL;AACA,aAAKC,aAAL;AACH;AACJ,KAtHI;AAwHLC,IAAAA,KAxHK,mBAwHG;AACJ,UAAI,KAAKlD,WAAT,EAAsB;AAClB,aAAKA,WAAL,GAAmB,KAAnB;AACA,aAAKmD,iBAAL;AACA,aAAKC,gBAAL;AACH;AACJ,KA9HI;AAgILC,IAAAA,eAhIK,2BAgIWC,CAhIX,EAgIc;AACf,UAAIA,CAAC,CAACC,MAAF,KAAa,KAAKhC,KAAL,CAAWiC,SAA5B,EAAuC;AACnC,aAAKN,KAAL;AACH;AACJ,KApII;AAsILF,IAAAA,cAtIK,4BAsIY;AAAA;;AACb,UAAI,CAAC,KAAKS,kBAAV,EAA8B;AAC1B,aAAKA,kBAAL,GAA0B,UAAAH,CAAC;AAAA,iBAAI,MAAI,CAACI,iBAAL,CAAuBJ,CAAvB,CAAJ;AAAA,SAA3B;;AAEA,SAAC,OAAD,EAAU,OAAV,EAAmB,SAAnB,EAA8BK,OAA9B,CAAsC,UAAAC,SAAS;AAAA,iBAC3CC,QAAQ,CAACC,gBAAT,CAA0BF,SAA1B,EAAqC,MAAI,CAACH,kBAA1C,CAD2C;AAAA,SAA/C;AAGH;AACJ,KA9II;AAgJLC,IAAAA,iBAhJK,6BAgJa1B,KAhJb,EAgJoB;AACrB,UAAIA,KAAK,CAAC+B,OAAV,EAAmB;AACf/B,QAAAA,KAAK,CAAC+B,OAAN,KAAkB,EAAlB,IAAwB,KAAKb,KAAL,EAAxB;AACH,OAFD,MAEO,IACH,EAAElB,KAAK,CAACuB,MAAN,KAAiB,KAAKS,GAAxB,KACA,CAAC,KAAKA,GAAL,CAASC,QAAT,CAAkBjC,KAAK,CAACuB,MAAxB,CAFE,EAGL;AACE,aAAKL,KAAL;AACH;AACJ,KAzJI;AA2JLC,IAAAA,iBA3JK,+BA2Je;AAAA;;AAChB,UAAI,KAAKM,kBAAT,EAA6B;AACzB,SAAC,OAAD,EAAU,OAAV,EAAmBE,OAAnB,CAA2B,UAAAC,SAAS;AAAA,iBAChCC,QAAQ,CAACK,mBAAT,CAA6BN,SAA7B,EAAwC,MAAI,CAACH,kBAA7C,CADgC;AAAA,SAApC;AAIA,eAAO,KAAKA,kBAAZ;AACH;AACJ,KAnKI;AAqKLR,IAAAA,aArKK,2BAqKW;AAAA;;AACZ,UAAI,CAAC,KAAKkB,qBAAV,EAAiC;AAC7B,aAAKA,qBAAL,GAA6B;AAAA,iBAAM,MAAI,CAACC,eAAL,EAAN;AAAA,SAA7B;;AACAC,QAAAA,MAAM,CAACP,gBAAP,CAAwB,QAAxB,EAAkC,KAAKK,qBAAvC;AACH;;AAED,WAAKC,eAAL;AACH,KA5KI;AA8KLA,IAAAA,eA9KK,6BA8Ka;AAAA;;AACd,UAAME,SAAS,GAAG,KAAKN,GAAL,CAASO,qBAAT,EAAlB;AAEA,UAAIC,aAAa,GAAG,iBAApB;;AAEA,UAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACpB,YAAMC,IAAI,GAAG,MAAI,CAACnD,KAAL,CAAWC,YAAX,CAAwB+C,qBAAxB,EAAb;;AACA,YAAMI,aAAa,GAAGD,IAAI,CAACE,MAA3B;;AAEA,YACIN,SAAS,CAACnD,GAAV,GAAgBmD,SAAS,CAACM,MAA1B,GAAmCD,aAAnC,GACAN,MAAM,CAACQ,WADP,IAEAP,SAAS,CAACnD,GAAV,GAAgBwD,aAAhB,GAAgC,CAHpC,EAIE;AACEH,UAAAA,aAAa,GAAG,oBAAhB;AACH;;AAED,QAAA,MAAI,CAAC9D,aAAL,GAAqB,CACjB8D,aADiB,EAEnBM,IAFmB,CAEd,GAFc,CAArB;AAIH,OAhBD;;AAkBA,WAAKvD,KAAL,CAAWC,YAAX,GAA0BiD,SAAS,EAAnC,GAAwC,KAAK1B,SAAL,CAAe0B,SAAf,CAAxC;AACH,KAtMI;AAwMLrB,IAAAA,gBAxMK,8BAwMc;AACf,UAAI,KAAKe,qBAAT,EAAgC;AAC5B,aAAKzD,aAAL,GAAqBqE,SAArB;AACAV,QAAAA,MAAM,CAACH,mBAAP,CAA2B,QAA3B,EAAqC,KAAKC,qBAA1C;AACA,eAAO,KAAKA,qBAAZ;AACH;AACJ,KA9MI;AA+MLa,IAAAA,aAAa,EAAE,yBAAY;AAAA;;AACvB,WAAKhF,WAAL,GAAmB,IAAnB;AACA,WAAK+C,SAAL,CAAe,YAAM;AACjB,QAAA,MAAI,CAACtC,gBAAL,GAAwB,MAAI,CAACyB,IAAL,CAAU,MAAI,CAAC1B,cAAf,CAAxB;;AACA,QAAA,MAAI,CAACY,QAAL,CAAc,MAAI,CAACJ,kBAAL,CAAwB,MAAI,CAACP,gBAA7B,CAAd;AACH,OAHD;AAIH,KArNI;AAsNLwE,IAAAA,aAAa,EAAE,uBAAUC,MAAV,EAAkBC,GAAlB,EAAuB;AAClC,UAAI,CAACD,MAAM,CAACE,QAAZ,EAAsB;AAClB,aAAKhF,OAAL,GAAe8E,MAAM,CAAC/C,IAAtB;AACA,aAAKF,SAAL;AACH;AACJ,KA3NI;AA4NLoD,IAAAA,SAAS,EAAE,mBAAUrD,KAAV,EAAiB;AACxB,cAAQA,KAAK,CAAC+B,OAAd;AACI,aAAK,CAAL;AAAQ;AACJ,eAAK3D,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAAhB,GAAqB,EAArB,GAA0B,KAAKI,cAA9C;AACA,eAAKyB,SAAL;AACA;AAJR;AAMH,KAnOI;AAoOLqD,IAAAA,OAAO,EAAE,iBAAUtD,KAAV,EAAiB;AACtB,cAAQA,KAAK,CAAC+B,OAAd;AACI,aAAK,EAAL;AAAS;AACL/B,UAAAA,KAAK,CAACuD,cAAN;AACA,cAAI9D,CAAC,GAAG,KAAKS,IAAL,CAAU,KAAK1B,cAAf,CAAR;;AACA,cAAI,KAAKR,WAAT,EAAsB;AAClB,gBAAIyB,CAAC,GAAG,CAAR,EAAW;AACPA,cAAAA,CAAC;AACJ;AACJ,WAJD,MAIO;AACH,iBAAKzB,WAAL,GAAmB,IAAnB;AACH;;AACD,eAAKQ,cAAL,GAAsB,KAAKN,GAAL,CAASuB,CAAT,EAAYU,IAAlC;AACA,eAAK/B,OAAL,GAAe,KAAKI,cAApB;AACA,eAAKC,gBAAL,GAAwBgB,CAAxB;;AACA,cAAI,KAAKX,iBAAT,EAA4B;AACxB,iBAAKA,iBAAL;AACH;;AACD;;AACJ,aAAK,EAAL;AAAS;AACLkB,UAAAA,KAAK,CAACuD,cAAN;AACA,cAAI9D,CAAC,GAAG,KAAKS,IAAL,CAAU,KAAK1B,cAAf,CAAR;;AACA,cAAI,KAAKR,WAAT,EAAsB;AAClB,gBAAIyB,CAAC,GAAG,KAAKvB,GAAL,CAASkC,MAAT,GAAkB,CAA1B,EAA6B;AACzBX,cAAAA,CAAC;AACJ;AACJ,WAJD,MAIO;AACH,iBAAKzB,WAAL,GAAmB,IAAnB;AACH;;AACD,cAAI,KAAKQ,cAAL,IAAuB,EAA3B,EAA+B;AAAEiB,YAAAA,CAAC,GAAG,CAAJ;AAAQ;;AACzC,eAAKjB,cAAL,GAAsB,KAAKN,GAAL,CAASuB,CAAT,EAAYU,IAAlC;AACA,eAAK/B,OAAL,GAAe,KAAKI,cAApB;AACA,eAAKC,gBAAL,GAAwBgB,CAAxB;;AACA,cAAI,KAAKX,iBAAT,EAA4B;AACxB,iBAAKA,iBAAL;AACH;;AACD;;AACJ,aAAK,EAAL;AAAS;AACL;AACA,eAAKV,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAAhB,GAAqB,EAArB,GAA0B,KAAKI,cAA9C;AACA,eAAKyB,SAAL;AACA;AAxCR;AA0CH;AA/QI;AA7BE,CAAf","sourcesContent":["export default {\n    props: {\n        value: String\n    },\n    data: function () {\n        return {\n            showOptions: false,\n            id: null,\n            opt: this.options,\n            resText: this.getText(this.value),\n            resValue: this.value,\n            resValueBefore: this.value,\n            resPlaceholder: this.getText(this.value),\n            typeAheadPointer: -1,\n            positionClass: ''\n        };\n    },\n    mounted() {\n        this.id = this._uid;\n    },\n    watch: {\n        value: function () {\n            this.resText = this.getText(this.value);\n            this.resPlaceholder = this.getText(this.value);\n        },\n        typeAheadPointer() {\n            this.maybeAdjustScroll();\n        }\n    },\n    methods: {\n        maybeAdjustScroll() {\n            let pixelsToPointerTop = this.pixelsToPointerTop();\n            let pixelsToPointerBottom = this.pixelsToPointerBottom();\n\n            if (pixelsToPointerTop <= this.viewport().top) {\n                return this.scrollTo(pixelsToPointerTop);\n            } else if (pixelsToPointerBottom >= this.viewport().bottom) {\n                return this.scrollTo(this.viewport().top + this.pointerHeight());\n            }\n        },\n        pixelsToPointerTop() {\n            let pixelsToPointerTop = 0;\n            if (this.$refs.dropdownMenu) {\n                for (let i = 0; i < this.typeAheadPointer; i++) {\n                    pixelsToPointerTop += this.$refs.dropdownMenu.children[i]\n                        .offsetHeight;\n                }\n            }\n            return pixelsToPointerTop;\n        },\n        pixelsToPointerBottom() {\n            return this.pixelsToPointerTop() + this.pointerHeight();\n        },\n        pointerHeight() {\n            let element = this.$refs.dropdownMenu\n                ? this.$refs.dropdownMenu.children[this.typeAheadPointer]\n                : false;\n            return element ? element.offsetHeight : 0;\n        },\n        viewport() {\n            return {\n                top: this.$refs.dropdownMenu ? this.$refs.dropdownMenu.scrollTop : 0,\n                bottom: this.$refs.dropdownMenu\n                    ? this.$refs.dropdownMenu.offsetHeight +\n                    this.$refs.dropdownMenu.scrollTop\n                    : 0\n            };\n        },\n        scrollTo(position) {\n            return this.$refs.dropdownMenu\n                ? (this.$refs.dropdownMenu.scrollTop = position)\n                : null;\n        },\n\n        closeEvent(event) {\n            this.showOptions = false;\n            this.resText = this.resPlaceholder;\n            this.endOfEdit();\n        },\n        getI: function (text) {\n            if (this.opt) {\n                for (var i = 0; i < this.opt.length; i++) {\n                    if (this.opt[i].text == text) {\n                        return i;\n                    }\n                }\n            }\n            return 0;\n        },\n        getValue: function (text) {\n            for (var i = 0; i < this.opt.length; i++) {\n                if (this.opt[i].text == text) {\n                    return this.opt[i].value;\n                }\n            }\n        },\n        getText: function (value) {\n            if (value == null) return \"\";\n            for (var i = 0; i < this.opt.length; i++) {\n                if (this.opt[i].value == value) {\n                    return this.opt[i].text;\n                }\n            }\n        },\n        endOfEdit: function () {\n            this.resValue = this.getValue(this.resText);\n            this.resPlaceholder = this.resText;\n            this.$emit(\"input\", this.resValue);\n            this.$emit(\"change-model\", this.resValue);\n            this.showOptions = false;\n        },\n        onInput: function (value) {\n            if (!this.showOptions) {\n                this.showOptions = true;\n            }\n            var val = this.resValueBefore;\n            for (var i = 0; i < this.opt.length; i++) {\n                let res = this.opt[i].text\n                    .toUpperCase()\n                    .indexOf(value.toUpperCase());\n                if (res == 0) {\n                    value = this.opt[i].text.substr(0, value.length);\n                    this.resValueBefore = value;\n                    val = value;\n                    this.resPlaceholder = this.opt[i].text;\n                    break;\n                }\n            }\n            if (val == \"\") {\n                this.resPlaceholder = this.placeholder;\n            }\n            this.$refs[\"input\"].value = val;\n            this.resText = val;\n            this.typeAheadPointer = this.getI(this.resPlaceholder);\n            this.scrollTo(this.pixelsToPointerTop(this.typeAheadPointer));\n        },\n\n        open() {\n            if (!this.showOptions) {\n                this.showOptions = true;\n                this.$nextTick(() => {\n                    this.typeAheadPointer = this.getI(this.resPlaceholder);\n                    this.scrollTo(this.pixelsToPointerTop(this.typeAheadPointer));\n                });\n                this.addCloseEvents();\n                this.setupPosition();\n            }\n        },\n\n        close() {\n            if (this.showOptions) {\n                this.showOptions = false;\n                this.removeCloseEvents();\n                this.teardownPosition();\n            }\n        },\n\n        closeViaOverlay(e) {\n            if (e.target === this.$refs.outerWrap) {\n                this.close();\n            }\n        },\n\n        addCloseEvents() {\n            if (!this.closeEventListener) {\n                this.closeEventListener = e => this.inspectCloseEvent(e);\n\n                [\"click\", \"keyup\", \"focusin\"].forEach(eventName =>\n                    document.addEventListener(eventName, this.closeEventListener)\n                );\n            }\n        },\n\n        inspectCloseEvent(event) {\n            if (event.keyCode) {\n                event.keyCode === 27 && this.close();\n            } else if (\n                !(event.target === this.$el) &&\n                !this.$el.contains(event.target)\n            ) {\n                this.close();\n            }\n        },\n\n        removeCloseEvents() {\n            if (this.closeEventListener) {\n                [\"click\", \"keyup\"].forEach(eventName =>\n                    document.removeEventListener(eventName, this.closeEventListener)\n                );\n\n                delete this.closeEventListener;\n            }\n        },\n\n        setupPosition() {\n            if (!this.positionEventListener) {\n                this.positionEventListener = () => this.positionFloater();\n                window.addEventListener(\"resize\", this.positionEventListener);\n            }\n\n            this.positionFloater();\n        },\n\n        positionFloater() {\n            const inputRect = this.$el.getBoundingClientRect();\n\n            let verticalClass = \"bs-position-top\";\n\n            const calculate = () => {\n                const rect = this.$refs.dropdownMenu.getBoundingClientRect();\n                const floaterHeight = rect.height;\n\n                if (\n                    inputRect.top + inputRect.height + floaterHeight >\n                    window.innerHeight &&\n                    inputRect.top - floaterHeight > 0\n                ) {\n                    verticalClass = \"bs-position-bottom\";\n                }\n\n                this.positionClass = [\n                    verticalClass\n                ].join(\" \");\n\n            };\n\n            this.$refs.dropdownMenu ? calculate() : this.$nextTick(calculate);\n        },\n\n        teardownPosition() {\n            if (this.positionEventListener) {\n                this.positionClass = undefined;\n                window.removeEventListener(\"resize\", this.positionEventListener);\n                delete this.positionEventListener;\n            }\n        },\n        onFocusSelect: function () {\n            this.showOptions = true;\n            this.$nextTick(() => {\n                this.typeAheadPointer = this.getI(this.resPlaceholder);\n                this.scrollTo(this.pixelsToPointerTop(this.typeAheadPointer));\n            });\n        },\n        onClickOption: function (option, key) {\n            if (!option.disabled) {\n                this.resText = option.text;\n                this.endOfEdit();\n            }\n        },\n        onKeyDown: function (event) {\n            switch (event.keyCode) {\n                case 9: // tab\n                    this.resText = this.resText == \"\" ? \"\" : this.resPlaceholder;\n                    this.endOfEdit();\n                    return;\n            }\n        },\n        onKeyUp: function (event) {\n            switch (event.keyCode) {\n                case 38: // up\n                    event.preventDefault();\n                    var i = this.getI(this.resPlaceholder);\n                    if (this.showOptions) {\n                        if (i > 0) {\n                            i--;\n                        }\n                    } else {\n                        this.showOptions = true;\n                    }\n                    this.resPlaceholder = this.opt[i].text;\n                    this.resText = this.resPlaceholder;\n                    this.typeAheadPointer = i;\n                    if (this.maybeAdjustScroll) {\n                        this.maybeAdjustScroll();\n                    }\n                    return;\n                case 40: // down\n                    event.preventDefault();\n                    var i = this.getI(this.resPlaceholder);\n                    if (this.showOptions) {\n                        if (i < this.opt.length - 1) {\n                            i++;\n                        }\n                    } else {\n                        this.showOptions = true;\n                    }\n                    if (this.resPlaceholder == \"\") { i = 0; }\n                    this.resPlaceholder = this.opt[i].text;\n                    this.resText = this.resPlaceholder;\n                    this.typeAheadPointer = i;\n                    if (this.maybeAdjustScroll) {\n                        this.maybeAdjustScroll();\n                    }\n                    return;\n                case 13: //enter\n                    //event.preventDefault();\n                    this.resText = this.resText == \"\" ? \"\" : this.resPlaceholder;\n                    this.endOfEdit();\n                    break;\n            }\n        }\n    }\n};"]}]}