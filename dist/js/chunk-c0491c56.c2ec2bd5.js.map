{"version":3,"sources":["webpack:///./src/views/configs/users/form.vue?69cf","webpack:///src/views/configs/users/form.vue","webpack:///./src/views/configs/users/form.vue?a089","webpack:///./src/views/configs/users/form.vue","webpack:///./src/widgets/view2/view.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","url","title","data","login","loading","scopedSlots","_u","key","fn","_v","_s","proxy","staticClass","on","$event","$root","goBack","submitForm","remove","_l","f","i","errors","name","Object","assign","validate","staticRenderFns","mixins","view","components","form1","edit1","api","fields","tables","users","methods","confirm","method","params","component","created","el","$set","fetchData","watch","$route","updateRoute","id","axios","get","then","response","catch","error","console","log"],"mappings":"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","file":"js/chunk-c0491c56.c2ec2bd5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form1',{attrs:{\"breadcrumbs\":[{url: '#/', title: 'Домой'}, {url: '#/users', title: 'Пользователи'}, {url: '', title: _vm.data.login ? _vm.data.login : 'Новый пользователь'}],\"loading\":_vm.loading},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_vm._v(_vm._s(_vm.data.login ? _vm.data.login : 'Новый пользователь'))]},proxy:true},{key:\"right\",fn:function(){return [_c('div',{staticClass:\"btn-block\"},[_c('button',{staticClass:\"btn btn-secondary\",on:{\"click\":function($event){return _vm.$root.goBack()}}},[_vm._v(\"Назад\")]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.submitForm()}}},[_vm._v(\"Записать\")]),_c('button',{staticClass:\"btn btn-danger\",on:{\"click\":function($event){return _vm.remove()}}},[_vm._v(\"Удалить\")])])]},proxy:true},{key:\"body\",fn:function(){return _vm._l((_vm.fields),function(f,i){return _c('edit1',{key:i,attrs:{\"field\":f,\"values\":_vm.data,\"error\":_vm.errors[f.name]},on:{\"input\":function($event){Object.assign(_vm.data, $event); _vm.validate(f.name)}}})})},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form1\n    :breadcrumbs=\"[{url: '#/', title: 'Домой'}, {url: '#/users', title: 'Пользователи'}, {url: '', title: data.login ? data.login : 'Новый пользователь'}]\"\n    :loading=\"loading\"\n  >\n    <template v-slot:title>{{data.login ? data.login : 'Новый пользователь'}}</template>\n    <template v-slot:right>\n      <div class=\"btn-block\">\n        <button @click=\"$root.goBack()\" class=\"btn btn-secondary\">Назад</button>\n        <button @click=\"submitForm()\" class=\"btn btn-primary\">Записать</button>\n        <button @click=\"remove()\" class=\"btn btn-danger\">Удалить</button>\n      </div>\n    </template>\n    <template v-slot:body>\n      <edit1\n        v-for=\"(f, i) in fields\"\n        :key=\"i\"\n        @input=\"Object.assign(data, $event); validate(f.name)\"\n        :field=\"f\"\n        :values=\"data\"\n        :error=\"errors[f.name]\"\n      ></edit1>\n    </template>\n  </form1>\n</template>\n\n<script>\nimport api from \"@/config/api\";\nimport form1 from \"@/widgets/form/form1.vue\";\nimport axios from \"axios\";\nimport router from \"@/config/router\";\nimport editMixin from \"@/widgets/view2/edit.js\";\nimport edit1 from \"@/widgets/view2/edit.vue\";\nimport viewMixin from \"@/widgets/view2/view.js\";\n\nexport default {\n  mixins: [viewMixin, editMixin],\n  components: {\n    form1,\n    edit1\n  },\n  data: function() {\n    return {\n      api: api.users,\n      fields: this.$root.tables.users,\n    };\n  },\n  methods: {\n    remove: function() {\n      if (confirm(\"Вы уверены, что хотите удалить пользователя?\")) {\n        this.loading = true;\n        axios({\n          method: \"delete\",\n          url: this.api,\n          data: { ids: [this.data.id] },\n          params: {}\n        })\n          .then(response => {\n            this.loading = false;\n            this.$root.$emit(\"show-info\", {\n              text: \"Пользователь удален\",\n              class: \"alert\"\n            });\n            router.push({ name: \"users\", params: {} });\n          })\n          .catch(error => {\n            console.log(error);\n          });\n      }\n    }\n  }\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./form.vue?vue&type=template&id=481ebf66&\"\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import axios from \"axios\";\n\nexport default {\n    data: function () {\n        return {\n            api: null,\n            loading: false,\n            data: {}\n        };\n    },\n    created() {\n        for (let el of this.fields) {\n            this.$set(this.data, el.name, null)\n        }\n        this.fetchData()\n    },\n    watch: {\n        $route: \"updateRoute\"\n    },\n    updateRoute: function () {\n        this.fetchData();\n    },\n    methods: {\n        fetchData() {\n            var id = this.$route.params.id\n            if (id) {\n                this.loading = true\n                axios\n                    .get(this.api, { params: { id: id } })\n                    .then(response => {\n                        this.loading = false\n                        Object.assign(this.data, response.data.data);\n                    })\n                    .catch(error => { console.log(error) })\n            }\n        },\n    }\n};"],"sourceRoot":""}