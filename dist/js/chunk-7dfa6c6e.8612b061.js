(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7dfa6c6e"],{"66bf":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return!1!==t.field.hidden?a("div",[!1===t.field.canEdit?a("view1",{attrs:{data:t.values,field:t.field}}):a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-4 col-sm-4 col-form-label text-right-sm"},[t._v("\n      "+t._s(t.field.title)+":\n    ")]),a("div",{staticClass:"col-md-8 col-sm-8"},[t.field.options?a("b-select",{attrs:{value:t.value,options:t.field.options,error:t.error},on:{input:function(e){t.e={},t.e[t.field.name]=e,t.$emit("input",t.e)}}}):"id"==t.field.type&&t.values.id>0||"login"==t.field.type&&t.values.id>0?a("div",{staticClass:"form-control"},[t._v(t._s(t.value))]):"pass"==t.field.type?a("b-input",{attrs:{value:t.value,error:t.error},on:{input:function(e){t.e={},t.e[t.field.name]=e,t.$emit("input",t.e)}}}):"avatar"==t.field.type?a("b-avatar",{attrs:{value:t.value,label:t.field.title,error:t.error,api:t.api.upload},on:{input:function(e){t.e={},t.e[t.field.name]=e,t.$emit("input",t.e)}}}):"image"==t.field.type?a("b-image",{attrs:{value:t.value,label:t.field.title,error:t.error,api:t.api.upload},on:{input:function(e){t.e={},t.e[t.field.name]=e,t.$emit("input",t.e)}}}):"text"==t.field.type?a("b-textarea",{attrs:{height:t.field.data&&t.field.data.height?t.field.data.height+"px":"600px",value:t.value,error:t.error},on:{input:function(e){t.e={},t.e[t.field.name]=e,t.$emit("input",t.e)}}}):"ref"==t.field.type?a("b-select-api",{attrs:{value:t.values[t.field.name+"_id"],api:t.field.data.api,error:t.error},on:{input:function(e){t.e={},t.e[t.field.name+"_id"]=e,t.$emit("input",t.e)}}}):"id"!=t.field.name?a("b-input",{attrs:{value:t.value,error:t.error},on:{input:function(e){t.e={},t.e[t.field.name]=e,t.$emit("input",t.e)}}}):t._e(),t.error?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.error))]):t._e()],1)])],1):t._e()},r=[],i=(a("7f7f"),a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{staticClass:"form-control",class:{"is-invalid":t.error},attrs:{disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)},input:function(e){return t.$emit("input",e.target.value)}}})}),l=[],s=(a("c5f6"),{props:{value:[String,Number],placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},error:{type:String,default:""}}}),o=s,u=a("2877"),c=Object(u["a"])(o,i,l,!1,null,null,null),d=c.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control",class:{"is-invalid":t.error},attrs:{disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)},input:function(e){return t.$emit("input",e.target.value)}}},[t.all?a("option",{attrs:{value:""}},[t._v("Все")]):t._e(),t._l(t.options,(function(e,n){return a("option",{key:n,domProps:{selected:t.value==e.value,value:e.value}},[t._v(t._s(e.text))])}))],2)},p=[],v={props:{value:[String,Number],options:Array,all:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},error:{type:String,default:""}}},m=v,h=Object(u["a"])(m,f,p,!1,null,null,null),g=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control",class:{"is-invalid":t.error},attrs:{disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)},input:function(e){return t.$emit("input",e.target.value)}}},[t.all?a("option",{attrs:{value:""}},[t._v("Все")]):t._e(),t._l(t.options,(function(e,n){return a("option",{key:n,domProps:{selected:t.value==e.value,value:e.value}},[t._v(t._s(e.text))])}))],2)},y=[],_=a("bc3a"),x=a.n(_),w={props:{value:[String,Number],api:String,all:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},error:{type:String,default:""}},data:function(){return{options:[]}},created:function(){this.fitchData()},methods:{fitchData:function(){var t=this;x.a.get(this.api).then((function(e){"ok"==e.data.status&&(console.log(t.value),t.options=e.data.data)})).catch((function(t){console.log(t)}))}}},S=w,$=Object(u["a"])(S,b,y,!1,null,null,null),k=$.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.value?a("div",[a("a",{attrs:{href:t.download+"/"+t.value,target:"_blank"}},[a("img",{staticStyle:{height:"100px"},attrs:{src:t.download+"/"+t.value+"?width=200&height=200"}})]),a("button",{staticClass:"btn btn-secondary",staticStyle:{margin:"5px"},on:{click:function(e){t.$emit("input",""),t.image=null}}},[t._v("Удалить")])]):a("div",[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:t.id+"-in"},on:{change:function(e){return t.upload()}}}),a("label",{staticClass:"btn btn-secondary",attrs:{for:t.id+"-in"}},[t._v("Загрузить")]),a("div",[t.image?a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"file-image-el row",staticStyle:{"align-items":"center"}},[a("div",{staticClass:"col-6"},[t._v(t._s(t.image.name))]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar",style:{width:t.status+"%"}},[t._v(t._s(t.status)+"%")])])])])]):t._e()],1)])])},j=[],A=a("a3be"),O={props:{value:String,label:{type:String,default:""},error:{type:String,default:""},api:{type:String,default:""}},data:function(){return{download:A["a"].download,id:null,image:null,status:0}},mounted:function(){this.id=this._uid},methods:{upload:function(){var t=this;this.image=this.$refs.file.files[0],this.status=0;var e=new FormData;e.append("file",this.image),e.append("name",this.image.name),x.a.post(this.api,e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){t.status=parseInt(e.loaded/e.total*100)}}).then((function(e){t.status=0,t.image=null,t.$emit("change",e.data.data.file),t.$emit("input",e.data.data.file)})).catch((function(){console.log("FAILURE!!")}))}}},E=O,B=Object(u["a"])(E,C,j,!1,null,null,null),I=B.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("textarea",{staticClass:"form-control",class:{"is-invalid":t.error},style:{height:t.height},attrs:{disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)},input:function(e){return t.$emit("input",e.target.value)}}})},R=[],T={props:{value:[String,Number],placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},error:{type:String,default:""},height:{type:String,default:"200px"}}},U=T,F=Object(u["a"])(U,P,R,!1,null,null,null),L=F.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.value?a("div",[a("a",{attrs:{href:t.download+"/"+t.value,target:"_blank"}},[a("img",{staticClass:"avatar",staticStyle:{height:"100px"},attrs:{src:t.download+"/"+t.value+"?width=200&height=200"}})]),a("button",{staticClass:"btn btn-secondary",staticStyle:{margin:"5px"},on:{click:function(e){t.$emit("input",""),t.image=null}}},[t._v("Удалить")])]):a("div",[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:t.id+"-in"},on:{change:function(e){return t.upload()}}}),a("label",{staticClass:"btn btn-secondary",attrs:{for:t.id+"-in"}},[t._v("Загрузить")]),a("div",[t.image?a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"file-image-el row",staticStyle:{"align-items":"center"}},[a("div",{staticClass:"col-6"},[t._v(t._s(t.image.name))]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar",style:{width:t.status+"%"}},[t._v(t._s(t.status)+"%")])])])])]):t._e()],1)])])},D=[],J={props:{value:String,label:{type:String,default:""},error:{type:String,default:""},api:{type:String,default:""}},data:function(){return{download:A["a"].download,id:null,image:null,status:0}},mounted:function(){this.id=this._uid},methods:{upload:function(){var t=this;this.image=this.$refs.file.files[0],this.status=0;var e=new FormData;e.append("file",this.image),e.append("name",this.image.name),x.a.post(this.api,e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){t.status=parseInt(e.loaded/e.total*100)}}).then((function(e){t.status=0,t.image=null,t.$emit("change",e.data.data.file),t.$emit("input",e.data.data.file)})).catch((function(){console.log("FAILURE!!")}))}}},M=J,z=Object(u["a"])(M,N,D,!1,null,null,null),Z=z.exports,q={components:{BInput:d,BTextarea:L,BSelect:g,BSelectApi:k,BImage:I,BAvatar:Z}},H=a("8c49"),G={mixins:[q],components:{view1:H["a"]},props:{values:Object,field:Object,error:String},data:function(){return{api:A["a"]}},computed:{value:function(){return this.values[this.field.name]}}},K=G,Q=Object(u["a"])(K,n,r,!1,null,null,null);e["a"]=Q.exports},"8c49":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return!0!==t.field.hidden&&"pass"!==t.field.type?a("div",[a("div",{staticClass:"row form-group"},[a("div",{staticClass:"col-sm-4 col-form-label text-right-sm"},[t._v(t._s(t.field.title)+":")]),a("div",{staticClass:"col-sm-8"},["text"==t.field.type?a("div",[a("div",{staticClass:"form-control",staticStyle:{overflow:"auto"},style:{height:t.field.data&&t.field.data.height?t.field.data.height+"px":"600px"},domProps:{innerHTML:t._s(t.data[t.field.name])}})]):"phones"==t.field.type?a("div",[a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",t._l(t.jsonparse(t.data[t.field.name]),(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(n+1))]),a("td",[a("div",{staticClass:"form-control"},[t._v(t._s(e.number))])])])})),0)])]):"image"==t.field.type?a("div",[a("a",{attrs:{href:t.api.download+"/"+t.data[t.field.name],target:"_blank"}},[a("img",{staticStyle:{height:"100px"},attrs:{src:t.api.download+"/"+t.data[t.field.name]+"?width=200&height=200"}})])]):"avatar"==t.field.type?a("div",[a("img",{staticClass:"avatar",staticStyle:{height:"100px"},attrs:{src:t.api.download+"/"+t.data[t.field.name]+"?width=100&height=100"}})]):a("div",{staticClass:"form-control"},[t.field.options?[t._v("\n          "+t._s(t.field.options.find((function(e){return e.value==t.data[t.field.name]}))?t.field.options.find((function(e){return e.value==t.data[t.field.name]})).text:"")+"\n        ")]:[t._v(t._s(t.data[t.field.name]))]],2)])])]):t._e()},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("Номер")])])])}],i=a("a3be"),l={props:{data:Object,field:Object},data:function(){return{api:i["a"]}},methods:{jsonparse:function(t){try{return JSON.parse(t)}catch(e){return{}}}}},s=l,o=a("2877"),u=Object(o["a"])(s,n,r,!1,null,null,null);e["a"]=u.exports},ba05:function(t,e,a){"use strict";a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("ac6a"),a("96cf");var n=a("3b8d"),r=(a("7f7f"),a("bc3a")),i=a.n(r),l=a("a3be");function s(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,i=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw r}}}}function o(t,e){if(t){if("string"===typeof t)return u(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var c={methods:{validator:function(t,e,a){var r=this;return new Promise((function(i){r.$nextTick(Object(n["a"])(regeneratorRuntime.mark((function n(){var l,o,u,c,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l="",!(Array.isArray(t)&&t.length>0)){n.next=39;break}o=a[e],u=s(t),n.prev=4,u.s();case 6:if((c=u.n()).done){n.next=31;break}if(d=c.value,"req"!=d||""!=o&&null!=o){n.next=12;break}l="Это поле обязательно.",n.next=28;break;case 12:if(!("pass"==d&&o&&""!=o&&o.length<6)){n.next=16;break}l="Пароль не менее 6 символов.",n.next=28;break;case 16:if("email"!=d||!o||""==o||r.validEmail(o)){n.next=20;break}l="Укажите корректный адрес электронной почты.",n.next=28;break;case 20:if("login"!=d||a["id"]>0){n.next=27;break}return n.next=23,r.validLogin(o);case 23:if(!n.sent){n.next=25;break}l="Такой пользователь уже существует";case 25:n.next=28;break;case 27:"repass"==d&&o!=a["pass"]?l="Пароли не совпадают.":"reemail"==d&&o!=a["email"]&&(l="Адреса почты не совпадают");case 28:""!=l&&i(l);case 29:n.next=6;break;case 31:n.next=36;break;case 33:n.prev=33,n.t0=n["catch"](4),u.e(n.t0);case 36:return n.prev=36,u.f(),n.finish(36);case 39:i(l);case 40:case"end":return n.stop()}}),n,null,[[4,33,36,39]])}))))}))},validEmail:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)},validLogin:function(t){return new Promise((function(e){i.a.get(l["a"].login_exists,{params:{login:t}}).then((function(t){e(t.data.result)})).catch((function(t){console.log(t)}))}))}}};function d(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=f(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,i=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw r}}}}function f(t,e){if(t){if("string"===typeof t)return p(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}e["a"]={mixins:[c],data:function(){return{loading:!1,data:{},validators:{},errors:{}}},created:function(){var t,e=d(this.fields);try{for(e.s();!(t=e.n()).done;){var a=t.value;if(this.$set(this.errors,a.name,null),a.validator){var n=a.name;"ref"==a.type&&(n+="_id"),this.$set(this.validators,n,a.validator)}}}catch(r){e.e(r)}finally{e.f()}},methods:{submitForm:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.validateAll(this.data);case 2:if(!t.sent){t.next=5;break}return this.submit(this.data,this.api),t.abrupt("return",!0);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),submit:function(t,e){var a=this;this.loading=!0,i.a.post(e,t).then((function(t){a.loading=!1,a.$root.$emit("show-info",{text:"Данные записаны",class:"info"})})).catch((function(t){console.log(t)}))},validateAll:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=!0,t.t0=regeneratorRuntime.keys(e);case 2:if((t.t1=t.t0()).done){t.next=10;break}return n=t.t1.value,t.next=6,this.validate(n);case 6:if(!t.sent){t.next=8;break}a=!1;case 8:t.next=2;break;case 10:return t.abrupt("return",a);case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),validate:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.validator(this.validators[e],e,this.data);case 2:return t.abrupt("return",this.errors[e]=t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}}}}]);
//# sourceMappingURL=chunk-7dfa6c6e.8612b061.js.map